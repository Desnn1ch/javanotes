### Области данных во время выполнения

1. **Method Area** хранит метаданные загруженных классов: код методов, пул констант, информацию о полях и методах (в том числе и code_ptr, access_flag и т.д. для методов), код конструкторов, **байт-код**.

	- Разделяемая между всеми потоками 
	
	- В HotSpot JVM называется **MetaSpace**, а до Java 8 назывался Permanent Generation
	
	- Metaspace по умолчанию автоматически расширяется в пределах доступной нативной (физической) памяти.
	
2. **Heap** хранит все объекты и массивы, созданные во время выполнения программы
	- Разделяемый между всеми потоками
	- Структура меняется в зависимости от **Garbage Collector**. Базово для какого-нибудь **Serial GC**:
	
		- **Young Generation:** Сюда помещаются новые созданные объекты. Делится на:
		    - **Eden Space:** Здесь создаются все новые объекты.
		    - **Survivor Spaces (S0 и S1):** Сюда перемещаются объекты, пережившие одну сборку мусора в Young Generation.
		    
		- **Old Generation:** Сюда перемещаются объекты, которые прожили достаточно долго в Young Generation (пережили несколько сборок мусора).
		
		- **(до Java 8) Permanent Generation / Metaspace
		
3. **Стеки потоков (Java Virtual Machine Stacks)** хранят состояния каждого Java-потока. При создании нового потока у него создается свой стек.

	- Неразделяемые
	
	- Стек состоит из **фреймов**. Каждый вызов метода создается новый фрейм, при завершении метода, он уничтожается. Он включает в себя:
	
		- **Локальные переменные** (массив оных). Доступ по индексу. Например **0** - это **this** у нестатических методов
	
		- **Стек операндов** - это область для выполнения инструкций байт-кода. Так как архитектура JVM стековая, то все операнды для инструкций берутся отсюда.
		
		- **Ссылка на ConstantPool текущего класса**
		
4. **Native Method Stack (Стеки нативных методов)** - у каждого потока свой нативный стек, нужны для поддержки выполнения нативных методов, то есть, которые написаны на C и C++. 

5. **Program Counter Register** - счетчик команд, у каждого потока он свой. Содержит адрес текущей инструкции, которую поток выполняет.
	- Из интересного, если выполняется нативный метод или метод, скомпилированный во время JIT-компиляции, то **PC** неопределен.