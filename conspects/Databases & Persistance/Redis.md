**Redis** = Remote Dictionary Server (пон)

Redis — это база данных, размещаемая в памяти, которая используется, в основном, в роли кеша, находящегося перед другой, «настоящей» базой данных, вроде PostgreSQL. Он смягчает нагрузку центральной базы данных приложения, связанную с обработкой следующих данных:
- Данные, которые редко меняются, к которым часто обращается приложение.
- Данные, не относящиеся к критически важным, которые часто меняются.
---

Характеристики
- In-memory (данные хранятся в **оперативке**, с опциональной записью на диск).
- Все данные = **ключ → значение**.
- Ключ всегда строка.
- Значение может быть разных типов: `string`, `list`, `set`, `hash`, `sorted set`, `stream`, `bitmap`, `hyperloglog` / `JSON` (через модуль).
- Внутри Redis данные хранятся в памяти, а на диск падают снапшоты.

---

тут можно прочитать про то, как работает репликация и тп в редисе
https://habr.com/ru/companies/wunderfund/articles/685894/
 ---

### Персистентность (хранение)

1. **RDB (snapshotting)** — периодические дампы на диск (быстро, компактно, но возможна потеря последних данных).
   Главный минус этого механизма заключается в том, что данные, поступившие в хранилище между моментами создания снепшотов, будут, при сбое Redis, утеряны. 

2. **AOF (Append Only File)** — лог всех операций (надёжнее, но файл растёт).
    - Каждая операция записи логируется в файл.
	- При перезапуске сервера команды из файла воспроизводятся → данные восстанавливаются.
	- В отличие от RDB (снимков), AOF надёжнее: хранит последовательность реальных команд.
	- Журнал работает по принципу «append-only» → файл постепенно растёт и занимает больше места. (но занимает гораздо больше чем RDB)
	- Данные сначала буферизуются, затем сбрасываются на диск через `fsync()` (момент вызова настраивается).

3. Можно включить **RDB + AOF** вместе.
		вообще редис базово юзает в таком случае AOF
		но
		тут прикол, что куда-то скинуть/передать/ залить и тп (к примеру в S3) то мы можем перекинуть RDB, что **занимает меньше места, быстрее** и тп (но не дает гарантии, что мы ни одну ячейку не потеряем) 
		а в случае, если нас интересует восстановить со 100% данными, то мы юзаем AOF, что будет оч долго, так как AOF хранит все команды → при рестарте Redis их нужно **проигрывать одну за другой**
		