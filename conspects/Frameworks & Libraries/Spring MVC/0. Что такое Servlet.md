**Java Servlet API** — API для реализации схемы запрос-ответ (request-response) на веб-сервере.

**Servlet** — интерфейс, который умеет получать запросы от клиента и возвращать ему ответы. Сервлет — это маленькая (смол) Java программа, которая исполняется на веб-сервере контейнером сервлетов. Сами по себе сервлеты не существуют без сервлет-контейнера в классическом понимании. 

Сервлеты работают следующим образом: когда клиентский браузер отправляет запрос на сервер, сервер проксирует (тупо передает) запрос в контейнер сервлетов, контейнер вызывает соответствующий сервлет для обработки запроса. Сервлет обрабатывает запрос, генерирует ответ, и отправляет его обратно клиенту. 

Интерфейс `javax.servlet.Servlet` задает методы для инициализации сервлета, обработки запросов и удаления сервлета с сервера. Это методы жиненного цикла сервлета, и они выполняются последовательно:

1. Создается сервлет, затем инициализируется с помощью метода `init(ServletConfig config)`
2. Сервлету перенаправляются все запросы от клиента через метод `service(ServletRequest req, ServletResponse res)`
3. Сервлет убирается из сервиса и удаляется с помощью метода `destroy()`

## Подытожим

### 1 Что такое сервлет

**Сервлет** — это Java-класс, реализующий спецификацию `javax.servlet.Servlet` (чаще через `HttpServlet`). Его задача: принимать запрос (через `ServletRequest` / `HttpServletRequest`), обрабатывать бизнес-логику и формировать ответ (через `ServletResponse` / `HttpServletResponse`). Сам по себе сервлет **не умеет слушать порт и работать с HTTP-протоколом**. Он реализует только бизнес-логику внутри `service()`/`doGet()`/`doPost()`.

---

### 2 Где живут сервлеты

Сервлеты **всегда исполняются внутри сервлет-контейнера** (Tomcat, Jetty, Undertow). Контейнер управляет жизненным циклом сервлета:
- создаёт объект → `init()`
- обрабатывает запросы → `service()` → (`doGet()`, `doPost()` …)
- завершает работу → `destroy()`.

---

### 3. Роль контейнера

Контейнер отвечает за:
- парсинг HTTP-запроса,
- создание `HttpServletRequest` и `HttpServletResponse`,
- вызов сервлета,
- многопоточность и потокобезопасность,
- управление сессиями, фильтрами, слушателями.

---

### 4. Роль веб-сервера

**Веб-сервер** — это компонент, который слушает TCP-порт и принимает HTTP(S). Он может отдавать статические файлы (HTML, CSS, картинки), либо **проксировать** (пересылать) запросы в сервлет-контейнер.

Варианты:
- **Отдельный веб-сервер** (Nginx/Apache) → проксирует запросы в контейнер (Tomcat/Jetty).
- **Встроенный вариант** (Tomcat, Undertow) → совмещают веб-сервер и контейнер в одном.

---

### 5. Spring MVC

В Spring по умолчанию регистрируется **один главный сервлет** — `DispatcherServlet`. Он работает как **фронт-контроллер**, принимает все запросы и внутри Spring решает, какой `@Controller`метод вызвать. Поэтому в приложении на Spring Boot обычно один сервлет (`DispatcherServlet`), но за ним скрывается множество контроллеров.


![[Pasted image 20250902182910.png]]
